<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ACUMEN â€¢ SÄ±nav AsistanÄ±</title> 

  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ¶</text></svg>">

  <script src="https://unpkg.com/mammoth/mammoth.browser.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  
<script type="module" src="js/auth.js"></script>

  <link rel="stylesheet" href="./styles.css" />
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>

<body>

<div id="loginOverlay" class="login-wrapper">
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
    
    <div class="floating-icon icon-1">âœ–ï¸</div>
    <div class="floating-icon icon-2">â—</div>
    <div class="floating-icon icon-3">ğŸ“</div>
    <div class="floating-icon icon-4">âœ¨</div>

    <div class="login-card">
        <div class="card-shine"></div>

        <div class="avatar-container">
            <div class="dog-anim">ğŸ¶</div>
            <div class="avatar-glow"></div>
        </div>
        
        <h1 class="app-title">ACUMEN <span style="font-size:12px; color:#a855f7; vertical-align: super;">v1.2</span></h1>
        <p id="welcomeMsg" class="app-subtitle">Pati seni bekliyor...</p>

        <button id="btnLoginGoogle" class="google-btn">
            <div class="btn-shine"></div> <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" width="24" alt="Google">
            <span>Maceraya BaÅŸla</span>
        </button>
        
        <div id="loginError" class="login-error"></div>


<div class="maker-signature">
    Designed & Coded by <span class="maker-name">Aykut Cevizci</span> ğŸ‘¨â€ğŸ’»
</div>
    </div>
</div>

<header class="glass-header">
  <div class="header-content">
    
    <div class="brand-area" id="brandLogo" style="cursor: pointer;" title="Yenilemek iÃ§in tÄ±kla">
      <div class="logo-circle modern-icon">
  <span class="spark">âœ¦</span>
</div>
      <div class="title-group">
        <div style="display:flex; align-items:center; gap:8px;">
            <h1>ACUMEN</h1>
            <span class="version-badge">v1.2</span>
        </div>
        <div class="sub">AkÄ±llÄ± Ã‡ok Zeki KiÅŸisel SÄ±nav AsistanÄ± :)</div>
      </div>
    </div>

    <div class="status-group">
      <div class="h-pill" title="Ã‡alÄ±ÅŸma Modu">
        <span class="h-icon">âš¡</span>
        <span id="modeLabel" class="h-val">HazÄ±rlÄ±k</span>
      </div>
      <div class="h-pill" title="Cevap AnahtarÄ± Durumu">
        <span class="h-icon">ğŸ”‘</span>
        <span id="keyLabel" class="h-val">â€”</span>
      </div>
    </div>

<div class="header-right">
    
    <div class="user-menu-wrapper">
        <div class="user-chip" id="userMenuTrigger" onclick="toggleUserMenu()">
            <span class="user-avatar">ğŸ§‘â€ğŸ“</span>
            <span id="headerUserName" class="user-name">Ã–ÄŸrenci</span>
            <span class="dropdown-arrow">â–¼</span>
        </div>

        <div id="userDropdown" class="glass-dropdown">
            <div class="dropdown-item" id="btnLogout">
                <span class="item-icon">ğŸšª</span>
               
            </div>
        </div>
    </div>

    <button id="btnThemeToggle" class="theme-btn-icon" title="TemayÄ± DeÄŸiÅŸtir">
        ğŸŒ™
    </button>
</div>

  </div>
</header>

<main>

<section class="card panel-left glass-panel">

  <div class="panel-header">
    <div class="panel-title">
      <div class="icon-box">ğŸ›</div>
      <div class="title-text">
        <h3>Kontrol Merkezi</h3>
        <span id="parseStatus" class="status-text">Sistem HazÄ±r</span>
      </div>
    </div>
    <div class="status-indicator ready"></div> </div>

  <div class="scrollable-content">
      
    <div class="input-section">
      <div class="nav-pills">
        <button class="nav-item active" onclick="switchTab('file', this)">ğŸ“‚ Dosya YÃ¼kle</button>
        <button class="nav-item" onclick="switchTab('text', this)">ğŸ“‹ Metin YapÄ±ÅŸtÄ±r</button>
        <button class="nav-item" onclick="switchTab('drive', this)">â˜ï¸ Drive</button>
        <button class="nav-item" onclick="switchTab('notes', this)">ğŸ“š Notlar</button>
      </div>

      <div id="tab-file" class="tab-content active">
        <label class="modern-dropzone">
          <input id="fileInput" type="file" accept=".docx,.txt,.pdf" hidden />
          <div class="dz-content">
            <div class="dz-icon-circle">â˜ï¸</div>
            <div class="dz-main-text">DosyayÄ± Buraya BÄ±rak</div>
            <div class="dz-sub-text">veya seÃ§mek iÃ§in tÄ±kla</div>
          </div>
          <div class="dz-filename" id="fileNameDisplay"></div>
        </label>
      </div>

      <div id="tab-text" class="tab-content" style="display:none;">
        <textarea id="pasteArea" class="glass-input" placeholder="SorularÄ± buraya yapÄ±ÅŸtÄ±r..."></textarea>
		
		
      </div>
	  
<div id="tab-drive" class="tab-content driveX" style="display:none;">
  <div class="driveX-card">
    <div class="driveX-top">
      <div class="driveX-title">
        <span class="driveX-ico">â˜ï¸</span>
        <div>
          <div class="driveX-h1">Drive</div>
          <div id="driveStatus" class="driveX-sub">HazÄ±r</div>
        </div>
      </div>

      <button id="btnDriveList" class="driveX-cta">Listele</button>
    </div>

    <div class="driveX-seg" role="tablist" aria-label="Drive source">
      <button id="btnModeMy" class="driveX-pill is-active" type="button">Driveâ€™im</button>
      <button id="btnModeFolder" class="driveX-pill" type="button">KlasÃ¶r</button>
    </div>

    <div id="driveFolderRow" class="driveX-row" style="display:none;">
      <input id="inpDriveFolder" class="driveX-input" placeholder="KlasÃ¶r linki veya ID" />
    </div>

    <div class="driveX-row">
      <input id="inpDriveFilter" class="driveX-input" placeholder="Dosya araâ€¦" />
      <button id="btnDriveClear" class="driveX-icon" type="button" title="Temizle">âœ•</button>
    </div>

    <div id="driveList" class="driveX-list" aria-label="Drive files"></div>

    <div class="driveX-bottom">
      <button id="btnDriveOpen" class="driveX-primary" type="button">SeÃ§ileni AÃ§</button>
      <div class="driveX-hint">PDFâ€™ler <b>Åablon StÃ¼dyosu</b> ile aÃ§Ä±lÄ±r.</div>
    </div>
  </div>
</div>

<div id="tab-notes" class="tab-content" style="display:none;">
  <div class="panel-left-inner">
    
    <div class="tools-grid-compact">
      <button id="btnAddNotePaste" class="tool-chip"><span>+</span> Metin</button>
      <button id="btnAddNoteFile" class="tool-chip"><span>+</span> Dosya</button>
      <button id="btnAddNoteDrive" class="tool-chip"><span>+</span> Drive</button>
    </div>

    <div class="divider-line"></div>

    <div class="list-section">
      <div class="between" style="margin-bottom: 8px;">
        <span class="sec-title">KÃ¼tÃ¼phanem (<span id="notesSelCount">0</span>)</span>
        <div class="row" style="gap:10px;">
          <button id="btnNotesSelectAll" class="text-link">TÃ¼mÃ¼nÃ¼ SeÃ§</button>
          <button id="btnNotesClearSel" class="text-link warn">Temizle</button>
        </div>
      </div>
      <div id="notesList" class="notesList" style="max-height: 200px; overflow-y: auto;"></div>
    </div>

    <div id="historySection" class="list-section" style="margin-top: 15px; border-top: 1px dashed var(--stroke); padding-top: 12px; display: none;">
      <div class="between" style="margin-bottom: 8px;">
        <span class="sec-title">ğŸ’¾ Ãœretilen Denemeler</span>
        <span id="historyCount" class="badge" style="font-size: 10px;">0 KayÄ±t</span>
      </div>
      <div id="practiceHistoryList" class="notesList" style="max-height: 150px; overflow-y: auto;">
        </div>
    </div>

    <div id="notesActionArea" class="config-section" style="margin-top: auto; display: none;">
      <div class="config-row">
        <label class="config-label">YÃ¶ntem</label>
        <div class="notesDist">
            <button id="btnDistBalanced" class="segBtn is-active">Dengeli</button>
            <button id="btnDistPriority" class="segBtn">Ã–ncelikli</button>
        </div>
      </div>

      <div class="config-row" style="margin-top: 8px;">
        <label class="config-label">KaÃ§ Deneme?</label>
        <div class="row" style="gap:8px;">
          <input id="practiceAttemptNo" type="number" min="1" max="10" value="1" class="glass-input small" style="width: 70px; text-align: center;">
          <span style="font-size: 11px; color: var(--muted); font-weight: 600;">versiyon</span>
        </div>
      </div>

      <div id="notesPriorityWrap" class="notesPriority" style="display:none; margin: 12px 0;">
        <div id="notesPriorityList" class="notesPriorityList"></div>
      </div>

      <button id="btnGeneratePractice" class="btn-hero primary" style="width: 100%; margin-top: 10px;">
        âœ¨ DENEME ÃœRET
      </button>
    </div>

  </div>
</div>

	  
	 <div class="template-section">
    <div class="ts-header">
       
        <div class="ts-titles">
            <h4>Åablon StÃ¼dyosu</h4>
            <small>KarmaÅŸÄ±k PDF'ler iÃ§in</small>
        </div>
    </div>

    <div class="ts-actions">
        <div id="template-active-badge" class="ts-badge active-badge" style="display: none;">
            <span class="material-icons-round">AlÄ±nan Soru</span>
            <span>Aktif</span>
        </div>

        <button id="btn-open-studio" class="ts-btn">
           
            <span>OluÅŸtur</span>
        </button>
    </div>
</div>
    </div>

    <div class="config-section">
      <div class="config-title">SINAV AYARLARI</div>
      
      <div class="config-row">
        <label class="config-label">â± SÃ¼re (Dakika)</label>
        <input id="durationMin" type="number" class="glass-input small" min="1" max="600" value="20">
      </div>

      <div class="switches-grid">
        <label class="switch-card" title="Dikkati daÄŸÄ±tan Ã¶ÄŸeleri gizle">
          <input id="focusMode" type="checkbox">
          <span class="slider"></span>
          <span class="label">Focus Mod</span>
        </label>

        <label class="switch-card" title="YÃ¼klenince hemen baÅŸla">
          <input id="autoStart" type="checkbox" checked>
          <span class="slider"></span>
          <span class="label">Oto. BaÅŸlat</span>
        </label>

        <label class="switch-card">
          <input id="shuffleQ" type="checkbox" checked>
          <span class="slider"></span>
          <span class="label">Soru KarÄ±ÅŸtÄ±r</span>
        </label>

        <label class="switch-card">
          <input id="shuffleO" type="checkbox">
          <span class="slider"></span>
          <span class="label">ÅÄ±k KarÄ±ÅŸtÄ±r</span>
        </label>
      </div>
    </div>

    <div class="main-actions">
      <button id="btnStart" class="btn-hero primary" disabled>
        <span class="btn-icon">ğŸš€</span> BAÅLAT
      </button>
      
      <div class="sub-actions-row">
        <button id="btnFinish" class="btn-secondary ok" disabled>âœ… Bitir</button>
        <button id="btnReset" class="btn-secondary bad">SÄ±fÄ±rla</button>
      </div>
    </div>

    <div id="aiSolveWrap" class="ai-solve-box" style="display:none;">
      <button id="btnAiSolve" class="btn-ai-magic">
        <span>ğŸ¤–</span> AI ile Tahmini Ã‡Ã¶z
      </button>
      <div class="ai-hint">Anahtar yoksa yapay zeka devreye girer.</div>
    </div>

    <div class="divider-line"></div>

<div class="tools-section">
  <div class="config-title" style="margin-bottom:12px;">ğŸ›  ARAÃ‡LAR & ANALÄ°Z</div>
  
  <div class="tools-grid-modern">
    <button id="btnWrongMode" class="tool-card purple-glow">
      <div class="tc-icon">â™»ï¸</div>
      <div class="tc-info">
        <span class="tc-title">YanlÄ±ÅŸlar</span>
        <span class="tc-desc">HatalarÄ±nÄ± tekrar et</span>
      </div>
    </button>

    <button id="btnSrsDash" class="tool-card blue-glow">
      <div class="tc-icon">ğŸ§ </div>
      <div class="tc-info">
        <span class="tc-title">SRS HafÄ±za</span>
        <span class="tc-desc">KalÄ±cÄ± Ã¶ÄŸrenme</span>
      </div>
    </button>

    <button id="btnExportWrongBook" class="tool-card green-glow full-width">
      <div class="tc-icon">ğŸ“‰</div>
      <div class="tc-info">
        <span class="tc-title">DetaylÄ± Rapor Al</span>
        <span class="tc-desc">Ä°lerlemeni HTML olarak indir</span>
      </div>
    </button>
  </div>

  <div class="danger-zone-modern">
    <button id="btnClearWrongBook" class="danger-btn">
      <span>ğŸ—‘ï¸ YanlÄ±ÅŸlarÄ± Temizle</span>
    </button>
    <button id="btnClearSave" class="danger-btn outline">
      <span>âš ï¸ SÄ±fÄ±rla</span>
    </button>
  </div>
</div>

  </div> <div class="timer-footer">
    <div class="timer-label">KALAN SÃœRE</div>
    <div id="timer" class="timer-digital">--:--</div>
  </div>

</section>


<section class="card glass-panel exam-container">

  <div class="exam-header-bar">
    <div class="exam-info">
      <div class="exam-icon">ğŸ“</div>
      <div>
        <h2 id="examTitle">SÄ±nav</h2>
        <div id="examMeta" class="exam-meta">HazÄ±r olduÄŸunda baÅŸlat.</div>
      </div>
    </div>

    <div class="toolbar" id="resultTools" style="display:none;">
      <label class="filter-chip wrong">
        <input id="showOnlyWrong" type="checkbox"> 
        <span>Sadece YanlÄ±ÅŸlar</span>
      </label>
      <label class="filter-chip blank">
        <input id="showOnlyBlank" type="checkbox"> 
        <span>BoÅŸlar</span>
      </label>
    </div>
  </div>

  <div class="layoutExam" id="layoutExam">
    
    <div class="navPanel glass-inner" id="navPanel" style="display:none;">
      <div class="navHeader">
        <span>ğŸ“ SORU HARÄ°TASI</span>
      </div>
      <div class="navGrid" id="navGrid">
        </div>
    </div>

    <div class="paper-area">
      <div id="examArea" class="exam-scroll-content">
        <div class="empty-state">
          <div style="font-size:40px; margin-bottom:10px;">ğŸ“„</div>
          <div>SÄ±nav yÃ¼klenince sorular burada gÃ¶rÃ¼necek.</div>
        </div>
      </div>
    </div>

  </div>
</section>

<div id="updateModal" class="modalOverlay" style="display:none;">
  <div class="modalCard" style="max-width: 500px;">
    
    <div class="modalTop">
      <div style="display: flex; align-items: center; gap: 12px;">
        <div class="step-icon" style="background: rgba(255, 45, 85, 0.1); border-color: rgba(255, 45, 85, 0.3); font-size: 22px; width: 44px; height: 44px; display: flex; align-items: center; justify-content: center; border-radius: 12px; border: 1px solid var(--stroke);">
          ğŸ
        </div>
        <div>
          <div class="modalTitle">Yenilikler & GÃ¼ncellemeler</div>
          <div class="modalSub" id="updateVersionBadge">SÃ¼rÃ¼m 1.0.0</div>
        </div>
      </div>
      <button onclick="closeUpdateModal()" class="modalClose">âœ•</button>
    </div>

    <div id="updateContent" style="margin-top: 20px; max-height: 300px; overflow-y: auto;">
      </div>

    <div class="modalActions">
      <button onclick="closeUpdateModal()" class="primary" style="width:100%">Harika, KeÅŸfet!</button>
    </div>
  </div>
</div>



</main>

<script type="module" src="./js/app.js"></script>

<script>
  function switchTab(tab, btnEl){
    // active button
    document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
    if (btnEl) btnEl.classList.add('active');

    // panels
    const file = document.getElementById('tab-file');
    const text = document.getElementById('tab-text');
    const drive = document.getElementById('tab-drive');
    const notes = document.getElementById('tab-notes');

    if (file) file.style.display = (tab === 'file') ? 'block' : 'none';
    if (text) text.style.display = (tab === 'text') ? 'block' : 'none';
    if (drive) drive.style.display = (tab === 'drive') ? 'block' : 'none';
    if (notes) notes.style.display = (tab === 'notes') ? 'block' : 'none';
  }

  // File input label update (existing behavior)
  const fileInp = document.getElementById('fileInput');
  if(fileInp){
    fileInp.addEventListener('change', function(){
      const name = this.files[0] ? this.files[0].name : '';
      const display = document.getElementById('fileNameDisplay');
      const main = document.querySelector('.dz-main-text');
      const sub = document.querySelector('.dz-sub-text');
      if(name) {
        display.textContent = name;
        display.style.display = 'block';
        if(main) main.style.display = 'none';
        if(sub) sub.style.display = 'none';
      } else {
        if(display) display.style.display = 'none';
        if(main) main.style.display = '';
        if(sub) sub.style.display = '';
      }
    });
  }
</script>

<div id="summaryModal" class="modalOverlay" style="display:none;">
  
  <div class="modalCard" role="dialog" aria-modal="true" aria-labelledby="summaryTitle">

    <div class="modalTop">
      <div>
        <div id="summaryTitle" class="modalTitle">ğŸ“Š SÄ±nav Karnesi</div>
        <div id="summarySub" class="modalSub">Performans analizi</div>
      </div>
      <button id="btnCloseSummary" class="modalClose" aria-label="Kapat">âœ•</button>
    </div>

    <div class="divider"></div>

    <div style="display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:10px;">
      <div class="modalSub" style="margin:0; font-weight:600; color:var(--text-main);">ğŸ“Š Konu BazlÄ± Hata Analizi</div>
      <button id="btnAiSubjects" class="g-btn" style="width:auto; font-size:11px; padding: 4px 10px;">
        ğŸ¤– AI ile KonularÄ± Tamamla
      </button>
    </div>

    <div id="aiSubjectPanelMount"></div>

    <div id="subjectAnalysisWrap" style="display:block; width: 100%; margin-bottom: 15px;">
      <div style="height: 180px; width: 100%; position: relative;">
        <canvas id="subjectChart"></canvas>
      </div>
    </div>

    <div class="summaryLayout">
      <div class="chartContainer">
        <canvas id="summaryChart"></canvas>
        <div class="chartCenter">
          <div class="scoreVal" id="mScoreDisplay">0</div>
          <div class="scoreLabel">PUAN</div>
        </div>
      </div>

      <div class="summaryGrid">
        <div class="statCard"><b id="mSumQ">0</b><span>Soru</span></div>
        <div class="statCard"><b id="mSumA">0</b><span>Cevaplanan</span></div>
        <div class="statCard ok"><b id="mSumC">0</b><span>DoÄŸru</span></div>
        <div class="statCard bad"><b id="mSumW">0</b><span>YanlÄ±ÅŸ</span></div>
        <div class="statCard warn"><b id="mSumB">0</b><span>BoÅŸ</span></div>
        <div class="statCard"><b id="mSumAvg">0sn</b><span>Ort. SÃ¼re</span></div>
      </div>
    </div>

    <div class="summaryActions" style="margin-top: 15px;">
      <div style="display:flex; gap:10px;">
        <button id="btnRetryWrongs" class="warn" style="font-size:12px; display:none;">â™» HatalarÄ± Tekrarla</button>
        <button id="btnReviewWrongs" class="bad" style="font-size:12px; display:none;">ğŸ” Ä°ncele</button>
      </div>
      <button id="btnOkSummary" class="primary">Tamam</button>
    </div>

  </div>
</div>

<div class="modalOverlay" id="srsModal" aria-hidden="true" style="display:none;">
  <div class="modalCard">
    <div class="modalTop">
      <div class="modalTitle">ğŸ“… SRS Dashboard</div>
      <button class="iconBtn" id="btnCloseSrs" title="Kapat">âœ•</button>
    </div>
    <div class="modalSub muted">Tekrar planÄ±n (SM-2)</div>
    <div class="grid2" style="margin-top:12px;">
      <div class="miniStat"><div class="k">Toplam</div><div class="v" id="srsTotal">0</div></div>
      <div class="miniStat"><div class="k">BugÃ¼n</div><div class="v" id="srsDue">0</div></div>
      <div class="miniStat"><div class="k">YarÄ±n</div><div class="v" id="srsTomorrow">0</div></div>
      <div class="miniStat"><div class="k">7 GÃ¼n</div><div class="v" id="srsNext7">0</div></div>
      <div class="miniStat"><div class="k">Learning</div><div class="v" id="srsLearning">0</div></div>
      <div class="miniStat"><div class="k">Mature</div><div class="v" id="srsMature">0</div></div>
    </div>
    <div class="divider"></div>
    <div style="position: relative; height:200px; width:100%; margin-top:10px;">
      <canvas id="srsChart"></canvas>
    </div>
    <div class="grid2" style="margin-top:10px;">
      <div class="miniStat"><div class="k">Avg EF</div><div class="v mono" id="srsAvgEf">0.00</div></div>
    </div>
    <div class="modalActions">
      <button id="btnOkSrs">Tamam</button>
    </div>
  </div>
</div>

<div id="loadingOverlay" class="loadingOverlay" style="display:none;" aria-hidden="true">
  <div class="loadingCard">
    <div class="spinner"></div>
    <div class="loadingText">AyrÄ±ÅŸtÄ±rÄ±lÄ±yorâ€¦</div>
  </div>
</div>

<div id="toastHost" class="toastHost" aria-live="polite" aria-atomic="true"></div>

<div id="focusBar" class="focusBar" style="display:none;">
  <span class="pill">â³ <span class="mono" id="focusTimer">--:--</span></span>
  <button id="btnFinishFocus" class="chip danger" style="display:inline-flex;">SÄ±navÄ± Bitir</button>
  <button id="btnExitFocus" class="ghost">Ã‡Ä±k</button>
</div>

<div id="resumeModal" class="modalOverlay" style="display:none;">
  <div class="modalCard" role="dialog" aria-modal="true" aria-labelledby="resumeTitle">
    <div class="modalTop">
      <div>
        <div id="resumeTitle" class="modalTitle">â¯ KaldÄ±ÄŸÄ±n yerden devam?</div>
        <div class="modalSub">Daha Ã¶nce yarÄ±m kalan bir sÄ±nav bulundu.</div>
      </div>
      <button id="btnCloseResume" class="modalClose">âœ•</button>
    </div>
    <div class="divider"></div>
    <div class="modalActions" style="justify-content:space-between;">
      <button id="btnDiscardResume" class="bad">SÄ±fÄ±rla</button>
      <button id="btnResume" class="primary">Devam et</button>
    </div>
  </div>
</div>

<div id="apiKeyModal" class="modalOverlay" style="display:none; z-index: 10000;">
  <div class="modalCard" style="max-width: 400px;">
    <div class="modalTop">
      <h3>ğŸ”‘ Gemini API AnahtarÄ±</h3>
    </div>
    <div style="padding: 15px 0; color: #ccc; font-size: 14px; line-height: 1.5;">
      Yapay zeka Ã¶zelliklerini kullanmak iÃ§in Google'dan aldÄ±ÄŸÄ±n Ã¼cretsiz API anahtarÄ±nÄ± girmen gerekiyor.
      <br><br>
      <a href="https://aistudio.google.com/app/apikey" target="_blank" style="color: #a855f7; text-decoration: underline;">AnahtarÄ± buradan alabilirsin â†—</a>
    </div>

    <input type="text" id="inpApiKeyUi" placeholder="AIza... ile baÅŸlayan kodunu yapÄ±ÅŸtÄ±r" 
           style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #444; background: #222; color: white; font-family: monospace; margin-bottom: 10px;">

    <div id="keyErrorUi" style="color: #ff453a; font-size: 13px; margin-bottom: 15px; display: none;">
      âš ï¸ LÃ¼tfen geÃ§erli bir anahtar girin.
    </div>

    <div class="summaryActions" style="justify-content: flex-end; gap: 10px;">
      <button id="btnCancelKeyUi" class="bad" style="background: transparent; border: 1px solid #444;">Ä°ptal</button>
      <button id="btnSaveKeyUi" class="ok">Kaydet ve Devam Et</button>
    </div>
  </div>
</div>
<div id="welcomeModal" class="modalOverlay" style="display:none;">
  <div class="modalCard" style="max-width: 650px; min-height: 500px; display: flex; flex-direction: column;">
    
    <div class="modalTop">
      <div>
        <div class="modalTitle" id="welcomeTitle">ğŸš€ SÄ±nav Ã‡Ã¶zÃ¼cÃ¼'ye HoÅŸ Geldin!</div>
        <div class="modalSub" id="welcomeStepText">AdÄ±m 1 / 3: Temel HazÄ±rlÄ±k</div>
      </div>
      <button onclick="closeWelcomeModal()" class="modalClose">âœ•</button>
    </div>

    <div id="onboardingContent" class="onboarding-content" style="flex: 1; margin-top: 20px;">
      </div>

    <div class="modalActions" style="margin-top: 30px; display: flex; justify-content: space-between; align-items: center;">
      <div id="stepDots" style="display: flex; gap: 8px;">
        <span class="dot active"></span>
        <span class="dot"></span>
        <span class="dot"></span>
      </div>
      <div style="display: flex; gap: 10px;">
        <button id="btnPrevStep" class="btn ghost" style="display: none;" onclick="changeStep(-1)">Geri</button>
        <button id="btnNextStep" class="btn primary" onclick="changeStep(1)">Devam Et</button>
      </div>
    </div>
  </div>
</div>
<div id="aiDisclaimer" class="ai-disclaimer-bar">
  <div class="disclaimer-track">
    
    <div class="d-logo-circle">
      <span class="d-icon">âœ¨</span>
    </div>

    <div class="d-text-wrapper">
      <div class="d-marquee">
         Ben yapay zeka destekli bir uygulamayÄ±m. Hata yapabilirim :) CevaplarÄ±nÄ±zÄ± teyit ediniz.
      </div>
    </div>

  </div>
</div>

<div id="patiWidget" class="pati-widget">
  
  <div id="patiSpeech" class="pati-speech" style="display:none;">Hadi soru Ã§Ã¶zelim!</div>
  <div class="pati-container">
    
    <div style="display:flex; flex-direction:column; align-items:center;">
        <div id="patiAvatar" class="pati-avatar">ğŸ¶</div>
        <div id="patiLevelBadge" class="pati-lvl">LVL 1</div>
    </div>
    
    <div class="pati-stats-area">
        <div class="pati-bar-wrap" title="Tokluk Durumu">
            <div id="patiSatietyBar" class="pati-bar-fill" style="width: 100%;"></div>
        </div>
        
        <div class="food-counter">
            <span>ğŸ– Stok:</span>
            <span id="patiFoodCount" style="font-weight:bold; color:#d97706;">0</span>
        </div>
        
        <div style="font-size:9px; color:#888; margin-top:2px;">Toplam: <span id="patiTotalFed">0</span></div>
    </div>

    <button class="btn-feed" onclick="PatiManager.feed()" title="1 Mama Ver">+ Besle</button>

  </div>
</div>
<div id="reportModal" class="modalOverlay" style="display: none;">
    <div class="modalCard report-card-fun">
        
        <div class="report-header">
            <div class="bouncing-icon">ğŸ•µï¸â€â™€ï¸</div>
            <h3>Dedektif Ä°ÅŸ BaÅŸÄ±nda!</h3>
            <p>Bir ÅŸeyler ters mi gidiyor yoksa harika bir fikrin mi var?</p>
        </div>

        <div class="modalBody">
            
            <div class="report-options">
                <label class="r-option">
                    <input type="radio" name="reportType" value="Hata" checked>
                    <div class="opt-box bug">
                        <span class="opt-icon">ğŸ</span>
                        <span>BÃ¶cek Var!</span>
                    </div>
                </label>
                
                <label class="r-option">
                    <input type="radio" name="reportType" value="Fikir">
                    <div class="opt-box idea">
                        <span class="opt-icon">ğŸ’¡</span>
                        <span>Parlak Fikir</span>
                    </div>
                </label>

                <label class="r-option">
                    <input type="radio" name="reportType" value="Sevgi">
                    <div class="opt-box love">
                        <span class="opt-icon">ğŸ’–</span>
                        <span>Ã‡ok Sevdim</span>
                    </div>
                </label>
            </div>

            <textarea id="reportText" placeholder="DetaylarÄ± buraya yaz ÅŸampiyon..." rows="4"></textarea>
            
            <div class="report-actions">
                <button id="btnCancelReport" class="btn-ghost">VazgeÃ§</button>
                <button id="btnSendReport" class="btn-send-rocket">
                    GÃ¶nder Gitsin! ğŸš€
                </button>
            </div>
        </div>
    </div>
</div>
<div id="logoutModal" class="custom-modal-overlay" style="display: none;">
    <div class="custom-modal-box">
        <div class="modal-icon-top">ğŸ‘‹</div>
        <h3 class="modal-title">Gidiyor musun?</h3>
        <p class="modal-desc">Oturumunu sonlandÄ±rmak istediÄŸine emin misin? Ä°lerlemeni kaydettin mi?</p>
        
        <div class="modal-actions">
            <button id="btnCancelLogout" class="modal-btn secondary">VazgeÃ§</button>
            <button id="btnConfirmLogout" class="modal-btn danger">Evet, Ã‡Ä±kÄ±ÅŸ Yap</button>
        </div>
    </div>
</div>
<button id="btnReportBug" title="Bir sorun mu var?">ğŸ§</button>

  <script>
  // ACUMEN_DND_WIRED: drag & drop -> #fileInput
  (function(){
    const input = document.getElementById('fileInput');
    const dz = document.querySelector('.modern-dropzone');
    const nameEl = document.getElementById('fileNameDisplay');

    if (!input || !dz) return;

    function setName(f){
      if (!nameEl) return;
      nameEl.textContent = f ? f.name : "";
      nameEl.style.display = f ? "block" : "";
    }

    // prevent browser from opening the file when dropped outside
    ['dragenter','dragover','dragleave','drop'].forEach(evt=>{
      window.addEventListener(evt, (e)=>{ e.preventDefault(); e.stopPropagation(); }, false);
    });

    dz.addEventListener('dragover', ()=> dz.classList.add('drag-over'));
    dz.addEventListener('dragleave', ()=> dz.classList.remove('drag-over'));
    dz.addEventListener('drop', (e)=>{
      dz.classList.remove('drag-over');
      const f = e.dataTransfer && e.dataTransfer.files && e.dataTransfer.files[0];
      if (!f) return;

      const dt = new DataTransfer();
      dt.items.add(f);
      input.files = dt.files;

      setName(f);
      input.dispatchEvent(new Event('change', { bubbles:true }));
    });

    input.addEventListener('change', ()=>{
      setName(input.files && input.files[0]);
    });
  })();
  </script>
<div class="security-side-tab modern-sst">
  <div class="sst-visible">
    <span class="sst-icon">ğŸ›¡ï¸</span>
    <span class="sst-vertical-text">GÃœVENLÄ° MOD</span>
  </div>

  <div class="sst-panel">
    <div class="sst-panel-inner">
        <div class="sst-header">
          <strong>%100 Yerel Veri</strong>
          <div class="radar-ping"></div>
        </div>
        
        <div class="sst-content">
          <div class="sst-item">
            <span class="item-icon">ğŸ’¾</span>
          <div class="item-text">
                    <strong>Cihaz TabanlÄ± Åifreleme</strong>
                    <span>Veriler kendi bilgisayarÄ±nÄ±zdaki tarayÄ±cÄ±da kalÄ±r.</span>
                </div>
          </div>
          <div class="sst-item">
            <span class="item-icon">ğŸš«</span>
            <div class="item-text">
                <strong>Veri PaylaÅŸÄ±mÄ± Yok</strong>
                <span>3. taraf analitik veya izleyici kesinlike bulunmaz.</span>
            </div>
          </div>
		       <div class="sst-item">
            <span class="item-icon">ğŸŒ©ï¸</span>
          <div class="item-text">
                    <strong>Ã‡evrimdÄ±ÅŸÄ± Mimari</strong>
                    <span>Analizler yerel iÅŸlemcide yapÄ±lÄ±r.</span>
                </div>
          </div>
        </div>
        <div class="sst-signature">ğŸ”’ ACUMEN Local Engine</div>
    </div>
  </div>
</div>
</body>
</html>
